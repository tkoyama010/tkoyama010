それでははいよろしくお願いいたし

ます本日は投の機会を

いただきありがとうございます本日はです

ねPythonで3次元CGを作り

たい人のための5ピスタニーモと

題してPythonで3次元

シジを作成する方法について小山が

お話しさせていただきますよろしくお願い

しますえまずあの自己紹介をさせて

いただきます私は小山鉄道と

申しますで主にですねSNSと言っ

ていいのか分からないんですけどもあの

gitHUB上で活動していること

が多いですでpythの3G貸化

ライブラリーである5ISAの

ライブラリーのメンテナンスと

ドキュメント翻訳をさせていただい

ていますでアカウント名はですねT小山

010というアカウント名を使うことが

多いですもしもよろしければフォロー

いただけるとありがたい

ですはいで本日の内容をですね目次

にしてみましたえまずはですね

PythonでCGを作ることににで

必要なことの概要をお話しして

その後実際に3次元CGを作成する

方法を順番にご紹介していきたいと

思いますでモデリングテクスチャー

マテマテリアルライティングという風な

専門用語があるんですけどもそちら

について基本的なことを説明してさせて

いただいて次にですね

PythonでCGを作った後にせかなの

で空間のデータ分析をしてみようと

いうことでデータ分析の方法につい

てえご説明させていただきますで

最後にですね応用例として

インタラクティブな可視化の方法について

いくつかご紹介させていただきたい

と思い

ますでおそらくですねあのここに

いらっしゃる方は結構あのPythonに

は慣れていらっしゃるかという風に思うん

ですけどもCGを作るというのは

結構初めての方がいらっしゃるかと思い

ますでそこでですねちょっと

あまり時間は取れないんですけども

簡単にCGの基本的なな操作方法に

ついてご説明申し上げたいと思い

ますまずはモデリングについててご

説明しますでモデリングとはですね

仮想3次元空間上という風にこういう風に

仮想の空間があるんですけどもそこ

に個々のポリゴンを作る作業になっ

ていますでCGを作る際にはこの

作業が最も基本的なものとなっていまして

これによって仮想空間上に自分の

作成したい物体を配置することは可能と

なっていますでこのようにえ円中の

えポリゴンが作成されていまして

こちらですねえ今回のえ結構目玉機能なん

ですけども

えこのインタラクティブシンという風な

タブをクリックしていただくとこのように

CGがインタラクティブに表示されます

はいでこれにの原理とかについては

後ほどご説明させていただき

ますで次にですね

テクスチャーマッピングについてご説説明

しますテクスチャーマッピングは

オブジェクトの質感を表現するための画像

となっておりますで先ほどの

モデリングで作成したオブジェクトにです

ねテクスチャーを貼り付けることで右の図

のようにCGをよりリアルに表現すること

ができ

ますはいこのようにですね円中に

地球の画像を貼り付けたちょっと謎の

オブジェクトがあるんですけどもまこの

ようにですねあの実際にそこに物がある

ようにもオブジェクトを見せるため

にあのこのようにテクスチャーを

貼り付けるという風な操作がえはいあの

コンピューターグラフィックではござい

ますで次の操作がですね

ライティングと言いまして3D空間上に光

を配置してオブジェクトを照らすことで

えコンピューターグラフィックの

クオリティを上げるあ操作となってい

ますはいでこちらですね現

あの中を表示している画面になっているん

ですけどもポインターがある方向から光が

照らされていてこのように円中に影ができ

ているという風な形となってい

ますで以上のですねコンピューター

グラフィックの要素を組み合わせて3次元

CGを作成していくことになるんですけど

もこれらの3次元CG作業をそれぞれパソ

で実現する方法を考えた際に今現状

で1番使いやすいと思われるのがこちらの

パイビスタというライブラリー

ですでこのパイビスタはですね

マットプロットリブとかパンダス

ですね先ほども出てきましたけども

それらのAPIを意識して作成されてい

ますのでこちらこれらに集中されて

いる皆さんであれば簡単に使用を

始めることができるものになってい

ますで皆さんあの

2次元のグラフなどを表示を

する際にはですねマットプロットリブを

一般的に使われるという風に思うんです

けどもこちらのマットプロットリブという

のは2次元のグラフを描画するにはとても

強力なライブラリーなんですけども

3次元プロットの機能はそれほど強力では

ないとなものとなっていますなのであの3

次元の空間情報や物体がどのように変形

するかなどを表現するには機能が不足して

いるということでマットプロットリブで

実現的内CCについてはパイビスタ

で実現しようという風なユーザーの

流れがござい

ますはいでこちらのライブラリー

ですねVIPインストールという風

なことでピッコマンドで

インストールすることは可能となってい

ますもちろん今田のインストール

パッケージも用意はされているんですけど

もPIPでインストールすることが一般的

となっていますでPIPインストール

パスタとすると最低限の

パスターのライブラリーがインストールさ

れるんですけどもこの後ご説明するジパー

の拡張機能をインストール

するためにはPPインストールパスタ

オールという風

にコマンドを打っていただく必要があり

ますこのオールというあの鍵括弧で囲まれ

た部分がオプションとなっていましてこれ

で全てのオプションをインストール

してくださいという風なコマンドとなって

い

ますはいではこれでスールが完了し

ましたので実際にコンピューター

グラフィックを作ってみてああの作ってみ

ましょうまずはモデリングをして

みようということでえ先ほどごご説明した

モデリングのパートをご説明し

ますPビスタをえあ失礼

Pythonを起動していただいて

ビスタをインポートしますでpyの

ライブラリーにはですねエリアスという

ものをけることができます例えばですね

NumであればイーNumPiasNPと

いう風にエリアスをつつけることができる

ようにPビスタではPVというエリアスで

インポートをし

ますでこちこのPVというのはですねP

ビスタで監修的に使われてる

エイリアスでして皆さんもこれを使って

いただければと思いますで次にですね

シリンダーという関数を使って延長の

モデルを作成いたしますで5では様々な

モデルを作成する関数が用意されており

まして

このシリンダーという延長を作成する関数

もその中の1つですこのような関数を使う

ことによって簡単にモデルを作成を

することができますで作成したモデルま

ポリゴンという風にもて言っていいかと

思いますけどもそのポリゴンのメソッドに

プロットというメソッドがございますので

そのプロットというメソッドを呼び出して

あげるとこの右側のようにモデルの

プロットが行われるという形となってい

ます

これはですねかなりあのマットプロット

リブを意識した仕様となっていまして

マットプロットリブに慣れた方であれば

比較的簡単に使用できるかという風

に思いますはいこのような

インタラクティブな3次元のポリゴンが

作成されるという風な形となってい

ますでまたですね複数のモデルを

作成することも可能ですマットプロット

リブにおいては複数のグラフを作成する際

にフィギュアオブジェクトを使って

複数のグラフを描画することができると

いうのはマットプロブをよくご存知の方は

ご存知だという風に思うんですけどもパイ

ビスタでも同様にプロッターオブジェクト

というオブジェクトを作成してそれで複数

のモデルを化することは可能ですこちらの

コードではプロッターオブジェクトを使っ

て中を2つ描画していますまずあの

プロッターオブジェクトを作成して

いただいてそして先ほどと同じように

ポリゴンですねメッシュを作成して

いただきますでそのメッシュをアメッシュ

メソッドを使っ

てこのプロッターの画面の中に追加をして

あげますで今回ですね2つオブジェクトを

追加をしたいということで1つ目を少し

ずらしてあげ

ますこちらです

ねメッシュのメソッドに

を移動するという風なメソッドになってい

ますでこのメッシュ自体を移動させたいと

いうことですので引数でinplace=

TRUEという風に設定をして移動方向の

ベクトルをXYZという引数で指定して

あげますこれはですねパンスのAPIを

意識した形となっていましてまあのパン

ダスをえに慣れた方であれば簡単に

使いこなせるかという風に思いますでこれ

でメッシュ自体が更新をされましてそれで

こちら右のようにプロットをすると

いう形になりますでプロットをする

際にですねその前にもう1つ液中を追加を

するとでこれも2回目のアメッシュ

メソッドを呼び出すことによってこのよう

に2つのメッシュをプロットすることは

可能となっていますでめでたくこの

ようにメッシがプロットするとまたまたま

あのこの円球が

あの繋がる位置にえメを持っていっ

たんですけどもまこのように複数のモデル

を自在に追加をすることができると

いう風な形となっておりますで次に

テクスチャーについてご説明させて

いただき

ますこのテクスチャーというのが

ですね先ほどご説明したように

モデルに画像をのあの表面に追加を

するという機能になっていましてこれを

実現するためにはまえパスタからの

エグザンプルのデータからですね画像の

サンプルをダウンロードします

そしてそれをリードテクスチャーという風

な関数でテクスチャーとして読み込みます

こちらですねテクスチャーには座標

情報どの位置にプロットをあのその

画像をプロットするかという風な座標あの

座標情報が含まれていますので画像

ファイルそのものとはまた異なりますので

ご注意くださいでこちらで読み込んだ

テクスチャーファイルですねそれを

引数に指定してあげてプロットをしてあげ

ますするとこのように先ほどご提示

したように円中の表面に画像がプロットさ

れているという風なそのような

オブジェクトが作成され

ますはいでこのようにですねテクスチャを

使って画像を貼り付けることで質感を表現

することははできるんですけどもあまり

リアリティがありませんそこでですね背景

を設定して背景の映り込みをテクスチャー

とせして設定することでよりリアリティの

あるCGを作成していこうと思い

ますまずはですねオブジェクトAの

映り込みに使用する背景を表示してみます

ゲームだなどCGを作成する際には背景に

スイボックスを設定することが一般的です

こちらの左下の画像がskyboxの例

です左右前後の6つの面の画像を背景に

設定することで全方向に背景を表示する

ことができ

ますパスタではダウンロードskybox

キュブマップという関数ちょっとあの名前

が長いんですけどもそれを使って標準の

スカイボックスをダウンロードすることが

でき

ますこちらの右がですねスカイボックスを

表示した例ですで中央にこれサンプルなん

ですけどもQが表示されていますこれを

使って背景の映り込みをテクスチャーとし

て設定することでよりリアリティのある

CGを作成してみ

ますそれでは質感と背景の映り込みを追加

をしてみましょうまずはあのskybox

を背景に設定し

ますその次にえ背景の映り込みを

テクスチャーとして設定しますその際には

ですねそれぞれアアクターとセット

エンバイロメントテクスチャーという風な

メソッドをそれぞれ設定をして背景と

テクスチャーの映り込みを決定することが

できますさらにオブジェクト自体にですね

物理ベースレンダリングPBRという風な

手法があるんですけどもこれも

ゲームでよく使用される

テクスチャーの設定ですねそれをトルと

いう風なフラグで設定をしてあげてそして

映り込みのこの表面具合を設定をしてあげ

ますそうすることでこの右に示している

ようによりリアリティのある延長を表示

することは可能となり

ます次にライティングについてご

説明し

ます先ほどご説明した通りライティングは

今まで作成をしたオブジェクトに光を

当てることで光と鍵を表現する操作です

パイビスタにはライトオブジェクトという

オブジェクトまクラスですねが定義されて

い

ますでこれを設定することで2をえ定義を

するんですけどもファスタのプロッター

オブジェクトには実はデフォルトでライト

オブジェクトがすでに設定してありまして

ライトオブジェクトを独立に定義するに際

にはこのプロッタークラスでライトニング

を無効にしておく必要があり

ます無効にした上で仮想空間上に光

を配置する設定をライトクラスで定義をし

てあげ

ますその際にはですね光の種類今回はシ

ライトという光の種類を使いますけども

それを設定してあげて光源をどの位置に

設定するかを設定してあげ

ますそしてそれをプロッタークラスの

アライトメソッドを使用することによって

光を追加をしてあげますそうすることで

こちらの右に示すように円中の片側から光

が

え光がえ照らされているという風な状態を

再現することができますで最初です

ねライトニングを無効にしていたんです

けどもこれを有効にしていてデフォルトの

光にしてあげてるとどういう風なことに

なるかと言いますとこのライト

タイプという光のタイプがカメラタイプに

なっていましカメラタイプにな視点タイプ

になりましてユーザーが見る方向

から光が当たるようになりますそうすると

影が一切見えずにオブジェクト全体

の様子が分かるという風なそのような形と

なっており

ますはいで以上でですねコンピューター

グラフィックの一通りの操作が

Pythonで実現できるということがお

分かりいただけたという風に思いますが

せっかくPythonを使っているので

単にコンピューターグラフィックをする

だけではなくて空間のデータ分析もして

それの結果を表示してみましょうと

いうことが次のセクションの

紹介となります

はいでパイビスタではですね

ポリゴンの1つ1つのセルですねに

データを持たせてパンダスのように処理

するメソッドが整備をされてい

ますで今回はその基本的な使い方について

ご説明をしたいと思い

ます今回minecのような洞窟を

作ってみようということでこのような右の

方にですね示すようなデータを準備

いたしましたでこのこれがどのよう

なデータかというのはえ左の方のコードで

説明をしているんですけど

も上下えと左右ですね3方向に作成

されたグリッドになっていますでグリッド

1つ1つにデータが配置されていまして

そのグリッドのデータがこのように

右に示すようにですねコンターで表示をさ

れてい

ますでこのデータをどのように配置

したあの作成したかと言いますと先ほどご

説明したようにですね1個1個ポリゴンを

あ立方体のポリゴンを設定をしてあげて

さらにですねデータをNumパイの配列で

準備をしてあげ

ますで念のためですねこのポリゴン

の数とNumパイのデータの数がが

一緒であるというのを確認をしておいて

くださいでこれを準備したすあすることで

このデータ

をポリゴンに辞書のように定義を

することができ

ます今回はあのデータという名前でこの

データを定義をしてあげてそして後でです

ね辞書のように呼び出すとこのように各

ポリゴンに対してどのような値が設定され

ているかというのを確認することができ

ますはいでかなり説明をはっ

ていますけどもこれであのデータの

準備ができましたでこのデータを

処理をして結果を表示しようという風な形

となっておりますでその際にはです

ねまずあのデータの最大値と最小値を取得

して確認を行いますその結果この

保持しているデータは最小が0.85最大

が0.93ということが分かり

ますここイはですねあのの普通のNum

パイの配列と処理は同じですので

あの皆さんが使い慣れたメソッドを使用

することが可能ですでこのポリゴン

をですねデータが0.565より大きい

グリッドだけ抽出をしてくださいという風

に設定をしますでこちらですね右のこの

コンターを見ていただくと

0.65すいません失礼しますあの

1つ戻りますねこちらの0.5665

この白い部分ですねこの白い部分の

データよりも大きい部分だけ取り出そうと

いう風な処理を行い

ますはいでここいらはですねあの

パンダスのメソドと同じようなえ似たよう

なAPIで処理を行うことができ

ましてポリゴンを抜き出すことが

できるとでえ抽出した後にもちろんあのさ

後のポリゴンにもデータが保持されている

わけですけどもその最大と最小を見てみる

とこのように確かに0.565以上の値が

出力されているということが分かり

ますでえ右がその結果になりますで

白い部分がですね全て削除をされ

まし

て土色の部分と青色の部分のみが残された

状態となりますでこちらですねあの

様よくやるmcraのような洞窟が作成さ

れるという風な形となっていましてこの

ようにグリグリ動かして洞窟の中を

回ってみると結構楽しめるかという風に

思いますはいで今回ですねこの

ポリゴンに使用したデータの作成の仕方

などについてはえま時間の都合上を省かせ

ていただきましたのでもしもご興味があれ

ば後でご質問していただければと思い

ますはいで以上で

コンピューターグラフィックを作りさらに

3DCGのあの空間の中で3事件の

空間のデータ分析をするということを行い

まし

たで最後にですねこのような

パイビスタというライブラリーが

Pythonのエコシステムの中でどの

ように活用しているか活用されているかと

いうことを応用あ応用事例ですね

それを紹介させていただいて終わり

としたいという風に

ます皆様

えPythonの結果を表示される

と際に様々なものツールをえ使わ

れるかと思いますまもちろんあのpyon

のエコシステムの中には様々なツールが

ございますのでえと使結果の表示に使わ

れるという風に思うんですけどもその中で

あの3点ほどご紹介したいと思いますまず

1つ目がスフィンクスですね

こちらえとスタートPythonクラブの

方にも確かスフィンクス界という

ものがあったという風に思いますけどもえ

ドキュメントのソフトのデファクト

スタンダードほぼデファクトスタンダード

ですねとなっているものですで

こちらですねスフィンクスで

エクステンションを使う際にプロ

ディレクティブというものが使用さ

れるんですけどもビスタをインストール

することによって標準で5ビスタ

プロットという風なディレクティブが定義

されますでこのディレクティブでですね

パイビスタをを使ったPython

コードを設定することによって右のような

今日えスライドでお見せしたような

インタラクティブな3次元の3DCGが

描画されるという風な機能がございますで

実はですねこのスライド自身も

スフィンクスで作成をしていまして

スフィンクスリビールJSという

今日のあの主催の日記さんと

かが有名なユーザーでいらっしゃいます

けどもえで作成されています

でこちらですねスフィンクス

リビールJSのスライドの作り方について

えはいあの曜日のある方は是非

スフィンクスリビールJSで検索をしてみ

てくださいはい日本人のあの竹さんという

方がえ作成をされてい

ますで次にジュパターによる

貸家についてご紹介しますこちらは

ジュパイタを使用したあの貸化なんです

けども

先ほどのパイビスタのオールの

オプションを設定することによって今動画

でお見せしているようにパターによる貸化

が可能となっていますでジパイタ上

でもですねスタティックな画像では

なくこのようにインタラクティブな画像で

結果を表示することはできますので先ほど

の3次元でのデータ分析を含めジパイタで

の分析

にコンピューターグラフィックを活用

いただければと思い

ますはいで最後にごごあのご説明

するのがストリームリットですね現在

あのジュパイタと並んでとても人気

のあるデータの可視化のえライブラリーの

1つとなっていますでこちら簡単に

Webアプリが作れるという風な

コンセプトで開発が進められている

プロジェクトなんですけどもこちらにも

パイビスタは対応しておりまして

これはあの本家にえ内されたものではなく

サードパーティーとして開発されたものな

んですけどもSTパスタという風な

プロジェクトがございますでそれを

インストールすることでですねストリー

ブリッドでもこのようにインタラクティブ

なコンピューターグラフィックを描画する

ことが可能となっておりますはいという

ことでご清聴どうもありがとう

ございましたこのプロジェクトは

ですね完全ボランティアで進めておりまし

てえコントリビューターの皆様にはえ

とても感謝をしておりますまたですね

私たちあの完全ボランティアですの

でこのプロジェクトにスターを

いただけるとあのもしもこのプロジェクト

が気に入ったらスターをいただける

ととても励みになりますので是非よろしく

お願いいたしますはい私からの発表は以上

になりますありがとうございまし

た
